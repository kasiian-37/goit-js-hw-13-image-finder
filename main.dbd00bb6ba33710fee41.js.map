{"version":3,"sources":["webpack:///./templates/imagesTemplate.hbs","webpack:///./js/pNotify.js","webpack:///./js/apiService.js","webpack:///./js/renderingFetchedImagesAPI.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","stackForNotify","Stack","dir1","firstpos1","spacing1","push","maxOpen","modal","positioned","context","document","body","onNotify","text","type","title","delay","options","stack","mode","width","clientWidth","alert","ImagesQuery","this","searchQuery","page","fetchImages","searchParams","URLSearchParams","q","per_page","key","fetch","response","json","imageList","incrementPage","resetPage","newQuery","refs","searchForm","querySelector","scrollHelper","imagesQuery","onDataReceived","images","allImagesCount","status","hits","length","totalHits","insertAdjacentHTML","imagesTemplate","querySelectorAll","forEach","item","addEventListener","onGalleryItemClick","message","fetchAndIncrementPage","then","error","console","log","clearGallery","innerHTML","query","focus","e","preventDefault","currentTarget","elements","value","trim","basicLightbox","dataset","largeImage","show","IntersectionObserver","entries","entry","isIntersecting","rootMargin","observe"],"mappings":"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","file":"main.dbd00bb6ba33710fee41.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\" data-large-image=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":42},\"end\":{\"line\":2,\"column\":59}}}) : helper)))\n    + \">\\n    <div class=\\\"photo-card\\\">\\n        <img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":42},\"end\":{\"line\":4,\"column\":58}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":65},\"end\":{\"line\":4,\"column\":71}}}) : helper)))\n    + \"\\\" />\\n\\n        <div class=\\\"stats\\\">\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">visibility</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">comment</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\n            </p>\\n        </div>\\n    </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import { alert, Stack } from '@pnotify/core';\n\nconst stackForNotify = new Stack({\n  dir1: 'up',\n  firstpos1: 0,\n  spacing1: 0,\n  push: 'bottom',\n  maxOpen: 1,\n  modal: false,\n  positioned: true,\n  context: document.body,\n});\n\nexport function onNotify(\n  text = 'Something went wrong',\n  type = 'error',\n  title = '',\n  delay = 1000,\n) {\n  const options = {\n    title,\n    text,\n    type,\n    stack: stackForNotify,\n    delay,\n    mode: 'light',\n    width: `${document.body.clientWidth}px`,\n  };\n  alert(options);\n}\n","const API_KEY = '19182122-b959857203510615d63e1aa25';\nconst BASE_URL =\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\n\nexport class ImagesQuery {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchImages() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      page: this.page,\n      per_page: 12,\n      key: API_KEY,\n    });\n    const response = await fetch(`${BASE_URL}${searchParams}`);\n    const imageList = await response.json();\n\n    return imageList;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import * as basicLightbox from 'basiclightbox';\nimport imagesTemplate from '../templates/imagesTemplate.hbs';\nimport { onNotify } from './pNotify.js';\n\nimport { ImagesQuery } from './apiService';\n\nconst refs = getRefs();\nconst imagesQuery = new ImagesQuery();\n\nfunction getRefs() {\n  return {\n    searchForm: document.querySelector('#search-form'),\n    imageList: document.querySelector('.gallery'),\n    scrollHelper: document.querySelector('#scroll-helper'),\n  };\n}\n\nrefs.searchForm.query.focus();\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  imagesQuery.query = e.currentTarget.elements.query.value;\n\n  if (!imagesQuery.query.trim()) {\n    clearGallery();\n    onNotify(`Type something to find.`, 'error', 'Error');\n    return;\n  }\n\n  imagesQuery.resetPage();\n  clearGallery();\n  fetchAndIncrementPage();\n}\n\nfunction createImagesListMarkup(images, allImagesCount) {\n  refs.imageList.insertAdjacentHTML('beforeend', imagesTemplate(images));\n  document\n    .querySelectorAll('.gallery-item')\n    .forEach(item => item.addEventListener('click', onGalleryItemClick));\n  if (images.length === 0) {\n    onNotify(\n      `You have scrolled to the end of ${allImagesCount} items collection.`,\n      'notice',\n      'Info',\n    );\n  }\n}\n\nfunction onDataReceived(data) {\n  if (data.status === 404) {\n    onNotify(`${data.message}`, 'error', data.status);\n    return;\n  }\n  if (imagesQuery.page === 1 && data.hits.length === 0) {\n    onNotify('Enter correct request', 'error', `${data.totalHits} was found.`);\n    return;\n  }\n  createImagesListMarkup(data.hits, data.totalHits);\n}\n\nasync function fetchAndIncrementPage() {\n  try {\n    imagesQuery.fetchImages().then(data => {\n      onDataReceived(data);\n      imagesQuery.incrementPage();\n    });\n  } catch (error) {\n    console.log('Error in fetchAndIncrementPage function:', error);\n  }\n}\n\nfunction clearGallery() {\n  refs.imageList.innerHTML = '';\n}\n\nconst onEntry = entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting && imagesQuery.query) {\n      fetchAndIncrementPage();\n    }\n  });\n};\n\nconst observer = new IntersectionObserver(onEntry, {\n  rootMargin: '50px',\n});\nobserver.observe(refs.scrollHelper);\n\nfunction onGalleryItemClick(e) {\n  const imageInstance = basicLightbox.create(`\n \t<img class=\"large-image\" src=\"${e.currentTarget.dataset.largeImage}\" alt=\"\"/>\n `);\n  imageInstance.show();\n}\n"],"sourceRoot":""}